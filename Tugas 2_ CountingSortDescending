package Tugas_02;

public class CountingSortDescending {

    public static void countingSortDescending(int[] arr) {
        if (arr.length == 0) {
            return;
        }

        // 1. Mencari nilai maksimum (k) dalam array untuk menentukan ukuran array hitungan (count).
        // a1, a2, ... a8
        int max = arr[0]; 
        for (int num : arr) {
            if (num > max) {
                max = num;
            }
        }
        
        // 2. Inisialisasi array 'count' dengan ukuran (max + 1).
        // Array ini akan menyimpan frekuensi kemunculan setiap elemen.
        int[] count = new int[max + 1];

        // 3. Menghitung frekuensi setiap elemen dan menyimpannya di array 'count'.
        for (int num : arr) {
            count[num]++;
        }

        // 4. Memodifikasi array 'count' untuk menyimpan posisi kumulatif (prefix sum)
        // dari setiap elemen di array output yang diurutkan.
        for (int i = 1; i <= max; i++) {
            count[i] += count[i - 1];
        }

        // 5. Membuat array 'output' sementara untuk menyimpan hasil pengurutan.
        int[] output = new int[arr.length];

        // 6. Membangun array output. Iterasi mundur dari array input 
        // untuk memastikan stabilitas (jika ada elemen yang sama).
        for (int i = arr.length - 1; i >= 0; i--) {
            // Tempatkan elemen arr[i] pada posisi yang benar di output.
            // Posisi tersebut ditunjukkan oleh count[arr[i]] - 1.
            output[count[arr[i]] - 1] = arr[i];
            // Kurangi nilai count[arr[i]] agar elemen yang sama berikutnya 
            // menempati posisi sebelumnya.
            count[arr[i]]--;
        }

        // --- Perubahan untuk Descending ---
        // Array 'output' saat ini terurut ascending (terkecil ke terbesar).
        // Kita perlu membalikkan urutan ini ke array asli 'arr'.
        int j = 0;
        for (int i = arr.length - 1; i >= 0; i--) {
            arr[j] = output[i];
            j++;
        }
    }

    public static void main(String[] args) {
        // Mendefinisikan variabel nilai (minimal 8 elemen)
        int[] data = {25, 12, 80, 5, 42, 10, 55, 30}; // Contoh dengan 8 elemen
        
        System.out.println("Data sebelum diurutkan:");
        for (int num : data) {
            System.out.print(num + " ");
        }

        // Memanggil metode pengurutan
        countingSortDescending(data);

        System.out.println("\n\nData setelah diurutkan (terbesar ke terkecil):");
        for (int num : data) {
            System.out.print(num + " ");
        }
        System.out.println("\n");
    }
}
